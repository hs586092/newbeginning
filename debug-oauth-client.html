<!DOCTYPE html>
<html>
<head>
    <title>OAuth ë””ë²„ê¹…</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .error { background: #ffe6e6; border-left: 4px solid #ff0000; }
        .success { background: #e6ffe6; border-left: 4px solid #00aa00; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ” OAuth ë¡œê·¸ì¸ ë””ë²„ê¹…</h1>
    
    <div class="debug">
        <h3>í™˜ê²½ ì •ë³´</h3>
        <div id="env-info">Loading...</div>
    </div>

    <button id="test-google" onclick="testGoogle()">Google OAuth í…ŒìŠ¤íŠ¸</button>
    <button id="test-kakao" onclick="testKakao()">Kakao OAuth í…ŒìŠ¤íŠ¸</button>
    
    <div id="results"></div>

    <script type="module">
        // í™˜ê²½ ì •ë³´ í‘œì‹œ
        document.getElementById('env-info').innerHTML = `
            <strong>URL:</strong> ${window.location.origin}<br>
            <strong>User Agent:</strong> ${navigator.userAgent}<br>
            <strong>Time:</strong> ${new Date().toISOString()}
        `;

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function addResult(message, isError = false) {
            const div = document.createElement('div');
            div.className = 'debug ' + (isError ? 'error' : 'success');
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            document.getElementById('results').appendChild(div);
        }

        // Google OAuth í…ŒìŠ¤íŠ¸
        window.testGoogle = async function() {
            addResult('ğŸ”„ Google OAuth ì‹œì‘...');
            
            try {
                const response = await fetch('http://localhost:3000/api/test-oauth', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ provider: 'google' })
                });
                
                const result = await response.json();
                addResult(`Google OAuth ì‘ë‹µ: ${JSON.stringify(result)}`, !result.success);
                
            } catch (error) {
                addResult(`âŒ Google OAuth ì—ëŸ¬: ${error.message}`, true);
                console.error('Google OAuth ì—ëŸ¬:', error);
            }
        }

        // Kakao OAuth í…ŒìŠ¤íŠ¸
        window.testKakao = async function() {
            addResult('ğŸ”„ Kakao OAuth ì‹œì‘...');
            
            try {
                const response = await fetch('http://localhost:3000/api/test-oauth', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ provider: 'kakao' })
                });
                
                const result = await response.json();
                addResult(`Kakao OAuth ì‘ë‹µ: ${JSON.stringify(result)}`, !result.success);
                
            } catch (error) {
                addResult(`âŒ Kakao OAuth ì—ëŸ¬: ${error.message}`, true);
                console.error('Kakao OAuth ì—ëŸ¬:', error);
            }
        }
    </script>
</body>
</html>