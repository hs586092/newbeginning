-- =============================================
-- 최종 샘플 데이터 - 허용된 카테고리만 사용
-- 허용 카테고리: 'community' | 'expecting' | 'newborn' | 'toddler' | 'expert'
-- =============================================

BEGIN;

-- 현재 사용자 ID를 이용한 샘플 게시글 생성
DO $$
DECLARE
    current_user_id uuid;
BEGIN
    -- 현재 사용자 ID 가져오기
    SELECT auth.uid() INTO current_user_id;
    
    -- 만약 로그인된 사용자가 없다면 기본값 사용
    IF current_user_id IS NULL THEN
        current_user_id := gen_random_uuid();
    END IF;

    -- 15개 샘플 게시글 생성 (허용된 카테고리만 사용)
    INSERT INTO posts (id, user_id, author_name, title, content, category, is_question, baby_month, view_count, created_at) VALUES
    
    -- 육아 꿀팁 (5개)
    (gen_random_uuid(), current_user_id, '민주맘', '신생아 목욕시키는 꿀팁 공유해요!', 
     '첫째 때는 정말 무서웠는데, 이제 둘째하면서 깨달은 신생아 목욕 꿀팁들이 있어요. 물온도는 37-38도, 목욕시간은 5분 이내로 하고요. 특히 배꼽이 아직 떨어지지 않았다면 물에 담그지 말고 스펀지로 살살 닦아주세요. 목욕 후에는 바로 수건으로 감싸서 체온 유지가 중요해요!', 
     'newborn', false, 1, 124, NOW() - INTERVAL '2 days'),

    (gen_random_uuid(), current_user_id, '현우아빠', '이유식 거부하는 아이, 이렇게 해보세요!', 
     '24개월 첫째가 이유식을 정말 안 먹어서 고생했는데, 지금은 잘 먹어요! 비결은 아이와 함께 먹기, 다양한 모양으로 만들어보기, 그리고 무엇보다 강압적으로 먹이지 않기예요. 아이가 관심을 보일 때까지 기다려주는 것도 중요하더라고요.', 
     'toddler', false, 24, 89, NOW() - INTERVAL '1 day'),

    (gen_random_uuid(), current_user_id, '재현파파', '밤중 수유, 이렇게 하면 편해요', 
     '4개월 아기 아빠입니다. 밤중 수유할 때 정말 힘들잖아요. 저희는 수유등을 침실에 두고, 기저귀와 젖병을 손 닿는 곳에 미리 준비해놨어요. 특히 조유기 사용하시면 밤에도 바로 따뜻한 물 나와서 좋더라고요.', 
     'newborn', false, 4, 67, NOW() - INTERVAL '3 hours'),

    (gen_random_uuid(), current_user_id, '은희맘', '유치원 준비물, 이런 것들이 필요해요', 
     '셋째가 드디어 유치원에 입학해요! 첫째, 둘째 경험으로 정말 필요한 준비물들을 정리해봤어요. 1) 이름표, 2) 여벌옷 세트, 3) 실내화, 4) 물통과 컵, 5) 손수건과 티슈. 특히 아이가 스스로 신고 벗을 수 있는 신발을 선택하는게 중요해요!', 
     'toddler', false, 48, 156, NOW() - INTERVAL '5 days'),

    (gen_random_uuid(), current_user_id, '한할머니', '50년 육아 경험에서 나온 지혜', 
     '손주들을 돌보면서 느낀 건데, 요즘 엄마들이 너무 완벽하려고 하시는 것 같아요. 아이가 조금 울어도, 조금 더러워져도 괜찮아요. 중요한 건 사랑과 관심이에요. 너무 스트레스받지 마시고, 아이와 함께 성장한다고 생각해보세요.', 
     'expert', false, null, 203, NOW() - INTERVAL '1 week'),

    -- 놀이 추천 (3개) 
    (gen_random_uuid(), current_user_id, '영파파', '18개월 아이와 집에서 할 수 있는 놀이', 
     '비오는 날 집에서 18개월 아들과 뭘 할지 고민하다가 찾은 놀이들이에요! 1) 쌀놀이: 큰 통에 쌀 넣고 컵, 숟가락으로 놀기, 2) 박스놀이: 택배박스를 터널이나 집으로 만들기, 3) 물놀이: 욕실에서 물컵으로 놀기. 특히 쌀놀이는 정말 오랫동안 집중해서 놀더라고요!', 
     'toddler', false, 18, 78, NOW() - INTERVAL '2 days'),

    (gen_random_uuid(), current_user_id, '현우아빠', '아빠와 함께 하는 주말 놀이 추천', 
     '주말마다 아이들과 뭘 하며 놀지 고민인 아빠들 많으실 거예요. 저희가 자주 하는 놀이들 공유해요! 1) 동네 공원에서 자전거 타기, 2) 집 앞 편의점에서 간식 고르기, 3) 집에서 만들기 놀이. 아이들은 아빠와의 시간 자체를 좋아하니까 너무 거창할 필요 없어요!', 
     'community', false, null, 92, NOW() - INTERVAL '4 days'),

    (gen_random_uuid(), current_user_id, '민주맘', '신생아와 함께하는 일상 놀이', 
     '신생아도 놀이가 있을까요? 있어요! 간단하지만 아기의 발달에 도움이 되는 놀이들이에요. 1) 눈맞춤하며 대화하기, 2) 다양한 표정 보여주기, 3) 부드러운 음악 들려주기, 4) 흑백 카드 보여주기.', 
     'newborn', false, 1, 45, NOW() - INTERVAL '1 day'),

    -- 육아 고민 상담 (4개)
    (gen_random_uuid(), current_user_id, '소영이', '첫 임신, 무엇을 준비해야 할까요?', 
     '첫 임신이라 모든 게 낯설고 불안해요. 출산 준비물은 언제부터 사야 하나요? 태교는 어떻게 하는 게 좋을까요? 병원 선택은 어떤 기준으로 해야 하는지도 궁금하고... 경험 많은 선배 엄마들의 조언을 구합니다!', 
     'expecting', true, null, 134, NOW() - INTERVAL '6 hours'),

    (gen_random_uuid(), current_user_id, '민주맘', '신생아 수면패턴 언제 잡히나요?', 
     '생후 1개월 아기인데 아직도 밤낮이 바뀌어 있어요. 낮에는 계속 자고, 밤에는 2시간마다 깨서 우는데 언제쯤 수면패턴이 잡힐까요? 너무 피곤해서 낮에 아기와 함께 자려고 해도 집안일 때문에 쉽지 않네요.', 
     'newborn', true, 1, 87, NOW() - INTERVAL '12 hours'),

    (gen_random_uuid(), current_user_id, '재현파파', '아내의 산후우울, 어떻게 도와야 할까요?', 
     '아내가 출산 후 많이 힘들어하는 것 같아요. 예전처럼 밝지 않고, 자주 울고, 아무것도 하기 싫어해요. 산후우울인 것 같은데 아빠로서 어떻게 도와야 할지 모르겠어요. 같은 경험을 하신 분들은 어떻게 극복하셨는지 조언 부탁드려요.', 
     'newborn', true, 4, 156, NOW() - INTERVAL '1 day'),

    (gen_random_uuid(), current_user_id, '은희맘', '세 아이 키우기, 정말 힘드네요', 
     '첫째 5살, 둘째 3살, 셋째 1살... 매일이 전쟁 같아요. 아이들 스케줄 맞추는 것도 힘들고, 각각 다른 발달 단계라 챙겨야 할 것도 다르고요. 특히 셋째가 밤에 자주 깨니까 낮에도 피곤해서 큰 아이들에게 짜증을 내게 되네요.', 
     'community', true, null, 198, NOW() - INTERVAL '3 days'),

    -- 지역 맘 모임 (2개)
    (gen_random_uuid(), current_user_id, '민주맘', '강남구 신생아맘 모임 만들어요!', 
     '강남구에 사시는 신생아(0-6개월) 엄마들과 함께 모임을 만들고 싶어요! 육아 정보도 나누고, 가끔 카페에서 만나서 수다도 떨고 싶어요. 첫째라 혼자 키우기 막막한 부분이 많거든요. 비슷한 시기에 출산하신 분들, 연락 주세요!', 
     'community', false, null, 67, NOW() - INTERVAL '2 days'),

    (gen_random_uuid(), current_user_id, '영파파', '광주 아빠 모임 있나요?', 
     '광주에 사는 육아하는 아빠입니다. 주변에 비슷한 또래 아이를 키우는 아빠들과 만나고 싶어요. 아이들 데리고 공원에서 만나서 놀기도 하고, 아빠들끼리 육아 고민도 나누면 좋겠어요. 광주 서구, 남구 쪽에 계신 아빠들 연락 주세요!', 
     'community', false, null, 34, NOW() - INTERVAL '5 days'),

    -- 전문가 조언 (1개)
    (gen_random_uuid(), current_user_id, '한할머니', '우리 아이 성장 발달, 이런 점들을 체크해보세요', 
     '50년 넘게 아이들을 지켜본 할머니로서 말씀드려요. 아이마다 성장 속도는 다르니까 너무 조급해하지 마세요. 하지만 이런 점들은 체크해보시면 좋아요: 1) 눈맞춤과 반응, 2) 적절한 시기의 미소, 3) 소리에 대한 반응, 4) 운동발달. 무엇보다 아이를 있는 그대로 사랑해주세요.', 
     'expert', false, null, 289, NOW() - INTERVAL '1 week');

END $$;

COMMIT;

-- 성공 메시지
SELECT '✅ 최종 샘플 데이터 생성 완료! 15개의 게시글이 추가되었습니다.' as result;